<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Sakai 3 R&amp;D - __MSG__CONTENT_AND_MEDIA__</title>

        <!-- Sakai Core CSS -->
        <link rel="stylesheet" type="text/css" href="_css/FSS/fss-base.css" />
        <link rel="stylesheet" type="text/css" href="_css/sakai/sakai.base.css" />
        <link rel="stylesheet" type="text/css" href="_css/sakai/sakai.core.2.css" />
        <link rel="stylesheet" type="text/css" href="_css/sakai/sakai.3.css" />

        <!-- Sakai Page CSS -->
        <link rel="stylesheet" type="text/css" href="_css/sakai/sakai.contentmedia.css" />
        <link type="text/css" rel="stylesheet" href="/devwidgets/navigationchat/css/navigationchat.css"/>

        <!-- 3rd party CSS -->
        <link rel="stylesheet" type="text/css" href="_css/sakai/sakai.components.jq_pager.css" />
        <link rel="stylesheet" type="text/css" href="_lib/jquery/plugins/imgareaselect/imgareaselect-default.css" />
        <link rel="stylesheet" type="text/css" href="_lib/JsTree/tree_component.css" />

        <!-- Sakai Config JS -->
        <script type="text/javascript" src="_configuration/widgets.js"></script>
        <script type="text/javascript" src="_configuration/config.js"></script>

        <!-- Core 3rd-party JS -->
        <script type="text/javascript" src="_lib/jquery/jquery.js"></script>
        <script type="text/javascript" src="_lib/jquery/jquery-ui.full.js"></script>
        <script type="text/javascript" src="_lib/Fluid/3akai_Infusion.js"></script>
        <script type="text/javascript" src="_lib/jquery/plugins/jquery.json.js"></script>

        <!-- Sakai Core JS -->
        <script type="text/javascript" src="_lib/sakai_util/sakai_magic.js"></script>
        <script type="text/javascript" src="_lib/sakai_util/sdata.js"></script>
        <script type="text/javascript" src="_lib/sakai_util/i18n.js"></script>
        <script type="text/javascript" src="_lib/sakai_util/site_authz.js"></script>

        <!-- 3rd party JS -->
        <script type="text/javascript" src="/dev/_lib/sakai_util/trimpath.template.js"></script>
        <script type="text/javascript" src="/dev/_lib/sakai_util/querystring.js"></script>
        <script type="text/javascript" src="/dev/_lib/jquery/plugins/jqmodal.js"></script>
        <script type="text/javascript" src="/dev/_lib/jquery/plugins/jquery.cookie.js"></script>
        <script type="text/javascript" src="/dev/_lib/jquery/plugins/jquery.pager.js"></script>
        <script type="text/javascript" src="_lib/sakai_util/SHA.js"></script>
        <script type="text/javascript" src="_lib/JsTree/tree_component.min.js"></script>
        <script type="text/javascript" src="_lib/JsTree/css.js"></script>
        <script type="text/javascript" src="_lib/Fluid/ProgressiveEnhancement.js"></script>

    </head>

    <body id="root" class="fl-centered fl-container i18nable contentmedia-container">

        <!-- EXPLORE BAR -->
        <div id="widget_navigationchat" class="widget_inline">
        </div>

        <!-- CONTENT -->
        <div class="fl-container fl-fix fl-container-flex content contentmedia_content" style="display:none">
            <div class="fl-fix fl-centered fixed-container">
                <div class="decor"><!-- -->
                </div>

                <!-- TITLE --><h1 class="title">__MSG__FIND_BROWSE_AND_MANAGE_FILES__</h1>

                <!-- CONTENT -->
                <div class="fl-centered fl-container fl-tab-content contentmedia_content_wrapper">
                    <div class="contentmedia_tab_content_top">
                        <div class="contentmedia_tab_content_top_inner">
                            <!-- -->
                        </div>
                    </div>
                    <div class="contentmedia_content_main">
                        <div id="contentmedia_drop_message"></div>
                        <div id="contentmedia_drop_message_template"><!--
                            ${count}
                            {if count == 1}
                            file has
                            {else}
                            files have
                            {/if}
                             been added to
                            {if kind == "tag"}
                            the "${dropped}" tag.
                            {else}
                            "${dropped}"
                            {/if}
                        --></div>

                        <!-- Left container -->
                        <div id="contentmedia_main_left">
                            <!-- Context Filters -->
                            <div id="contentmedia_context_filters">
                                <a href="javascript:;" id="contentmedia_accordion_list_site_all">__MSG__ALL_FILES__ (debug)<span class="contentmedia_hidden">__MSG__ALLFILES__</span></a>
                                <a href="javascript:;" id="contentmedia_context_filters_myfiles">__MSG__MY_FILES__<span class="contentmedia_hidden">__MSG__MYFILES__</span></a>
                                <a href="javascript:;">__MSG__MY_CONTACTS_FILES__<span class="contentmedia_hidden">__MSG__MYCONTACTS__</span></a>
                                <a href="javascript:;">__MSG__FILES_ON_MY_SITES__<span class="contentmedia_hidden">__MSG__MYSITES__</span></a>
                                <a href="javascript:;" id="contentmedia_accordion_list_site_bookmarks">__MSG__MY_BOOKMARKED_FILES__<span class="contentmedia_hidden">__MSG__MYBOOKMARKS__</span></a>
                            </div>

                            <!-- Accordion -->
                            <div id="contentmedia_accordion">
                                <a href="javascript:;" title="__MSG__SEARCH_FOR_FILES__">__MSG__SEARCH__</a>
                                <div id="contentmedia_search">
                                    <form>
                                        <input type="text" value="SEARCH_FOR_FILES ..." class="input" id="search_text" title="__MSG__SEARCH_FOR_FILES__ ..." />
                                        <button id="contentmedia_search_button" class="s3d-search-button s3d-button s3d-button-primary"><span class="s3d-button-inner"><span class="s3d-button-icon-right">__MSG__SEARCH__</span></span></button>
                                    </form>
                                </div>

                                <a href="javascript:;" title="Browse by folders" id="contentmedia_folders_trigger">__MSG__BROWSE_BY_FOLDERS__</a>
                                <div id="contentmedia_folders">

                                </div>

                                <a href="javascript:;" title="__MSG__FILTER_BY_TAG__">__MSG__FILTER_BY_TAG__</a>
                                <div id="contentmedia_accordion_list_tag">
                                    <div class="contentmedia_accordion_list_tag_top">
                                        <a href="javascript:;">A</a> <a href="javascript:;">B</a> <a href="javascript:;">C</a> <a href="javascript:;">D</a>
                                        <a href="javascript:;">E</a> <a href="javascript:;">F</a> <a href="javascript:;">G</a> <a href="javascript:;">H</a> <a href="javascript:;">I</a>
                                        <a href="javascript:;">J</a> <a href="javascript:;">K</a> <a href="javascript:;">L</a> <a href="javascript:;">M</a> <a href="javascript:;">N</a>
                                        <a href="javascript:;">O</a> <a href="javascript:;">P</a> <a href="javascript:;">Q</a> <a href="javascript:;">R</a> <a href="javascript:;">S</a>
                                        <a href="javascript:;">T</a> <a href="javascript:;">U</a> <a href="javascript:;">V</a> <a href="javascript:;">W</a> <a href="javascript:;">X</a>
                                        <a href="javascript:;">Y</a> <a href="javascript:;">Z</a>
                                    </div>

                                    <div class="contentmedia_accordion_list">
                                        <a href="javascript:;"><span>Animals</span> (1)</a>
                                        <a href="javascript:;"><span>Barcelona</span> (23)</a>
                                        <a href="javascript:;"><span>Car</span> (7)</a>
                                        <a href="javascript:;"><span>Flower</span> (11)</a>
                                        <a href="javascript:;"><span>India</span> (1)</a>
                                        <a href="javascript:;"><span>Live</span> (9)</a>
                                        <a href="javascript:;"><span>Spring</span> (1)</a>
                                        <a href="javascript:;"><span>Sunset</span> (4)</a>
                                        <a href="javascript:;"><span>Zoo</span> (1)</a>
                                    </div>
                                </div>

                                <a href="javascript:;" title="Filter by site">__MSG__FILTER_BY_SITE__</a>
                                <div id="contentmedia_accordion_list_site">

                                </div>
                                <a href="javascript:;" title="__MSG__UPLOAD_NEW_FILES__" id="contentmedia_uploader_trigger">__MSG__UPLOAD_NEW_FILES__</a>
                                <div id="uploader-contents">

                                    <!-- This form will be progressively enhanced by the Fluid Uploader component. -->
                                    <form method="post" enctype="multipart/form-data" class="fl-uploader fl-progEnhance-basic">
                                        <p>__MSG__BROWSE_TO_UPLOAD_A_FILE__.</p>
                                        <input name="fileData" type="file" title="__MSG__BROWSE_TO_UPLOAD_A_FILE__" />
                                        <div><input type="submit" value="__MSG__SAVE__" title="__MSG__SELECT_THE_FILE__"/></div>
                                    </form>

                                    <!-- This is the markup for the Fluid Uploader component itself. -->
                                    <form class="flc-uploader fl-uploader fl-progEnhance-enhanced"
                                          method="get"
                                          enctype="multipart/form-data">

                                        <!-- The file queue -->
                                        <div class="fl-uploader-queue-wrapper">

                                            <!-- Top of the queue -->
                                            <div class="fl-uploader-queue-header">
                                                <table cellspacing="0" cellpadding="0" summary="Headers for the file queue.">
                                                    <caption>__MSG__FILE_UPLOAD_QUEUE__:</caption>
                                                        <tr>
                                                            <th scope="col" class="fl-uploader-file-name">__MSG__FILE_NAME__</th>
                                                            <th scope="col" class="fl-uploader-file-size">__MSG__SIZE__&nbsp;&nbsp;</th>
                                                            <th scope="col" class="fl-uploader-file-actions">&nbsp;</th>
                                                        </tr>
                                                </table>
                                            </div>

                                            <!-- Scrollable view -->
                                            <div class="flc-scroller fl-scroller">
                                                <div class="fl-scroller-inner">
                                                    <table cellspacing="0" class="flc-uploader-queue fl-uploader-queue" summary="Queue of files to upload.">
                                                        <tbody>

                                                            <!-- Rows will be rendered in here. -->

                                                            <!-- Template markup for the file queue rows -->
                                                            <tr class="flc-uploader-file-tmplt flc-uploader-file fl-uploader-hidden-templates">
                                                                <th class="flc-uploader-file-name fl-uploader-file-name" scope="row">__MSG__FILE_NAME_PLACEHOLDER__</th>
                                                                <td class="flc-uploader-file-size fl-uploader-file-size">0 KB</td>
                                                                <td class="fl-uploader-file-actions">
                                                                    <button type="button" class="flc-uploader-file-action fl-uploader-file-action" title="__MSG__REMOVE_FILE__" tabindex="-1">
                                                                        <span class="fl-uploader-button-text fl-uploader-hidden">__MSG__REMOVE_FILE_FROM_QUEUE__</span>
                                                                    </button>
                                                                </td>
                                                            </tr>

                                                            <!-- Template for the file error info rows -->
                                                            <tr class="flc-uploader-file-error-tmplt fl-uploader-file-error fl-uploader-hidden-templates">
                                                                <td colspan="3" class="flc-uploader-file-error"></td>
                                                            </tr>

                                                        </tbody>
                                                    </table>
                                                    <div class="flc-uploader-file-progressor-tmplt fl-uploader-file-progress"><span class="fl-uploader-file-progress-text fl-uploader-hidden">76%</span></div>
                                                </div>
                                            </div>

                                            <div class="flc-uploader-browse-instructions fl-uploader-browse-instructions">
                                                __MSG__CHOOSE__ <em>__MSG__BROWSE_FILES__</em> __MSG__TO_ADD_FILES_TO_THE_QUEUE__
                                            </div>

                                            <!-- Foot of the queue -->
                                            <div class="flc-uploader-queue-footer fl-uploader-queue-footer">
                                                <table cellspacing="0" cellpadding="0" summary="Status of file queue.">
                                                        <tr>
                                                            <td class="flc-uploader-total-progress-text">
                                                                Total: <span class="fl-uploader-totalFiles">0</span> __MSG__FILES__
                                                                (<span class="fl-uploader-totalBytes">0 KB</span>)
                                                            </td>
                                                            <td class=".fl-uploader-footer-buttons" align="right" >
                                                                <a href="#" class="flc-uploader-button-browse fl-uploader-browse">__MSG__BROWSE_FILES__</a>
                                                            </td>
                                                        </tr>
                                                </table>
                                                <div class="flc-uploader-total-progress fl-uploader-total-progress-okay">&nbsp;</div>
                                            </div>
                                        </div>

                                        <!-- Action buttons -->
                                        <div class="fl-uploader-btns">
                                            <button type="button" class="flc-uploader-button-pause fl-uploader-pause fl-uploader-hidden">__MSG__STOP_UPLOAD__</button><button type="button" class="flc-uploader-button-upload fl-uploader-upload fl-uploader-button-default fl-uploader-dim" disabled="disabled">__MSG__UPLOAD__</button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                        </div>

                        <div id="contentmedia_main_right">
                                <div id="contentmedia_bar_right">
                                    <a id="contentmedia_actions_view_list" href="javascript:;" title="__MSG__LIST_VIEW__">__MSG__LIST_VIEW__</a>|
                                    <a id="contentmedia_actions_view_thumbnail" href="javascript:;" title="__MSG__THUMBNAIL_VIEW__"><span>__MSG__THUMBNAIL_VIEW__</span></a>|
                                    <a id="contentmedia_actions_edit" href="javascript:;" title="__MSG__FILE_SETTINGS__">__MSG__FILE_SETTINGS__</a>|
                                    <a id="contentmedia_actions_remove" href="javascript:;" title="__MSG__REMOVE_FILES__">__MSG__REMOVE_FILES__</a>
                                </div>

                                <!-- Filters -->
                                <div id="contentmedia_list_title"></div>
                                <div id="contentmedia_list_title_template"><!--
                                    <div class="contentmedia_list_heading_main contentmedia_list_heading">
                                        {if site.length > 0}
                                            ${site[0].name}
                                        {else}
                                            {if context === "allfiles"}
                                                __MSG__ALL_FILES__
                                            {elseif context === "myfiles"}
                                                __MSG__MYFILES__
                                            {elseif context === "mycontacts"}
                                                __MSG__MY_CONTACTS_FILES__
                                            {elseif context === "mysites"}
                                                __MSG__FILES_ON_MY_SITES__
                                            {elseif context === "mybookmarks"}
                                                __MSG__MY_BOOKMARKED_FILES__
                                            {else}
                                                ${context}
                                            {/if}
                                        {/if}

                                        {if site.length > 0 || context != "myfiles"}
                                        <a href="javascript:;" id="contentmedia_remove_filter_context" title="__MSG__REMOVE_THE_TAG_FILTERS__"><img src="/devwidgets/filemanager/images/remove_filter.png" alt="__MSG__REMOVE_THE_TAG_FILTERS__" /></a>
                                        {/if}
                                    </div>
                                    {if tag && tag.length > 0}
                                    <div class="contentmedia_list_heading">
                                        With tag
                                        {for t in tag}
                                            {if t_index == tag.length-1 && t_index > 0}
                                                and
                                            {elseif t_index > 0}
                                                ,
                                            {/if}
                                            "${t}"
                                        {/for}
                                        <a href="javascript:;" id="contentmedia_remove_filter_tag" title="__MSG__REMOVE_THE_TAG_FILTERS__"><img src="/devwidgets/filemanager/images/remove_filter.png" alt="__MSG__REMOVE_THE_TAG_FILTERS__" /></a>
                                    </div>
                                    {/if}
                                    {if search && search !== "*"}
                                    <div class="contentmedia_list_heading">
                                        Using "${search}" search query <a href="javascript:;" id="contentmedia_remove_filter_search"><img src="/devwidgets/filemanager/images/remove_filter.png" alt="__MSG__REMOVE_THE_TAG_FILTERS__" /></a>
                                    </div>
                                    {/if}
                                --></div>
                                <!-- Filters -->

                                <div id="contentmedia_files_container"></div>
                                <div id="contentmedia_paging" class="jq_pager"></div>
                                <div id="contentmedia_files_container_template"><!--
                                    {for i in results}
                                        <div class="contentmedia_file" id="contentmedia_filename_${i_index}">
                                            {if i['sakai:mimeType']}
                                                {var mimeType = i['sakai:mimeType']}
                                            {elseif i.file && i.file['sakai:mimeType']}
                                                {var mimeType = i.file['sakai:mimeType']}
                                            {elseif i['jcr:primaryType'] === "sling:Folder"}
                                                {var mimeType = 'folder'}
                                            {/if}
                                            {if mimeType=="image/jpg" || mimeType=="image/png" || mimeType=="image/gif" ||mimeType=="image/bmp" }
                                                <img src="${i.path}" alt="${sakai.config.MimeTypes[mimeType].description}" />
                                            {elseif sakai.config.MimeTypes[mimeType]}
                                                <img src="${sakai.config.MimeTypes[mimeType].URL}" alt="${sakai.config.MimeTypes[mimeType].description}" />
                                            {else}
                                                <img src="${sakai.config.MimeTypes["other"].URL}" alt="${sakai.config.MimeTypes["other"].description}" />
                                            {/if}
                                            <div class="contentmedia_file_name">{if i.name}${i.name}{else}${i["sakai:filename"]}{/if}</div>
                                            {if i.formattedFilesize}
                                                <div class="contentmedia_file_size">${i.formattedFilesize}</div>
                                            {/if}
                                            {if i.formattedDateModified}
                                                <div class="contentmedia_file_datemodified">${i.formattedDateModified}</div>
                                            {/if}
                                            <a class="contentmedia_file_bookmark href="javascript:;">Bookmark this file</a>
                                            <div class="contentmedia_hidden">
                                                {if i.path}
                                                    ${i.path}
                                                {/if}
                                            </div>
                                        </div>

                                        <div class="contentmedia_fileinfo" id="contentmedia_fileinfo_${i_index}">
                                            <p><strong>Description:</strong></p>
                                            <p>
                                                {if i["sakai:description"]}
                                                    ${i["sakai:description"]}
                                                {else}
                                                    (no description available)
                                                {/if}
                                            </p>
                                            <p><strong>Tags:</strong></p>
                                            <p>
                                                {for t in i["sakai:tags"]}{if t_index > 0},{/if} ${t}{forelse}
                                                    (no tags available)
                                                {/for}
                                            </p>
                                            <p><strong>Used In:</strong></p>
                                            <p>
                                                {if i.usedIn && i.usedIn.sites && i.usedIn.total > 0}
                                                    {for u in i.usedIn.sites}
                                                        {if u_index > 0},{/if} ${u.name}
                                                    {/for}
                                                {else}
                                                    (not used anywhere)
                                                {/if}
                                            </p>
                                        </div>
    
                                    {/for}
                                --></div>
                            </div>
                    </div>
                    <div class="contentmedia_tab_content_bottom">
                        <div class="contentmedia_tab_content_bottom_inner">
                            <!-- -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="contentmedia_accordion_list_site_template"><!--
            {if items.length > 0}
            <div class="contentmedia_accordion_list">
            {/if}
            {for item in items}
                <a href="javascript:;">
                {if item && item.site && item.site.name}
                    ${item.site.name}
                {/if}
                <span class="contentmedia_hidden">${item.siteref}</span></a>
            {forelse}
                __MSG__NO_SITES_FOUND__
            {/for}

            {if items.length > 0}
            </div>
            {/if}
        --></div>

        <!-- FOOTER WIDGET -->
        <div id="widget_footer" class="widget_inline footercontainer"></div>

        <div id="contentmedia_dialog_edit" class="dialog">
            <div class="dialog_header">
                <div class="dialog_header_inner">
                    <h1>__MSG__EDIT_FILES__</h1>
                    <a href="javascript:;" class="jqmClose dialog_close_image" title="__MSG__CLOSE_DIALOG__">__MSG__CLOSE_DIALOG__</a>
                </div>
            </div>
            <div class="dialog_content">
                <a href="javascript:;" id="contentmedia_dialog_permissions_trigger">__MSG__PERMISSIONS__</a> |
                <a href="javascript:;" id="contentmedia_dialog_associations_trigger">__MSG__SITE_ASSOCIATIONS__</a>

                <div id="contentmedia_dialog_permissions">
                    <form method="get" action="#">
                        <input type="radio" value="public" id="contentmedia_dialog_permissions_public" name="contentmedia_dialog_permissions_options" checked="checked" />
                        <label for="contentmedia_dialog_permissions_public">__MSG__PUBLIC__</label><br />

                        <input type="radio" value="sharepeople" id="contentmedia_dialog_permissions_sharepeople" name="contentmedia_dialog_permissions_options" />
                        <label for="contentmedia_dialog_permissions_sharepeople">__MSG__VISIBLE_TO_PEOPLE_I_SHARE_WITH__</label><br />

                        <input type="button" value="__MSG__SET_PERMISSIONS__" title="__MSG__SET_PERMISSIONS__" />
                    </form>
                </div>

                <div id="contentmedia_dialog_associations" style="display:none;">
                    <div class="contentmedia_dialog_associations_select_container">
                        <div>__MSG__ALL_SITES__</div>
                        <select id="contentmedia_dialog_associations_select_all" size="10" multiple="multiple" title="__MSG__ALL_SITES__">
                            <option value="/_sites/site1">site1</option>
                            <option value="/_sites/site2">site2</option>
                            <option value="/_sites/site3">site3</option>
                            <option value="/_sites/site4">site4</option>
                            <option value="/_sites/site5">site5</option>
                            <option value="/_sites/site6">site6</option>
                            <option value="/_sites/site7">site7</option>
                            <option value="/_sites/site8">site8</option>
                            <option value="/_sites/site9">site9</option>
                            <option value="/_sites/site10">site10</option>
                            <option value="/_sites/site11">site11</option>
                            <option value="/_sites/site12">site12</option>
                        </select>
                    </div>

                    <div id="contentmedia_dialog_associations_move_container">
                        <a href="javascript:;" id="contentmedia_dialog_associations_move_selected" class="contentmedia_dialog_associations_move">&gt;</a>
                        <a href="javascript:;" id="contentmedia_dialog_associations_move_all" class="contentmedia_dialog_associations_move">&lt;</a>
                    </div>

                    <div class="contentmedia_dialog_associations_select_container">
                        <div>__MSG__SELECTED_SITES__</div>
                        <select id="contentmedia_dialog_associations_select_selected" size="10" multiple="multiple" title="__MSG__SELECTED_SITES__">
                            <option value="/_sites/site99">site99</option>
                        </select>
                    </div>

                    <input type="button" value="__MSG__SET_ASSOCIATIONS__" class="fl-push" title="__MSG__SET_ASSOCIATIONS__" />
                </div>
            </div>

            <div class="dialog_footer">
                <div class="dialog_footer_inner"><!-- --></div>
            </div>
        </div>
        <div id="contentmedia_dialog_remove" class="dialog">
            <div class="dialog_header">
                <div class="dialog_header_inner">
                    <h1>__MSG__REMOVE_FILES__</h1>
                    <a href="javascript:;" class="jqmClose dialog_close_image" title="__MSG__CLOSE_DIALOG__">__MSG__CLOSE_DIALOG__</a>
                </div>
            </div>
            <div class="dialog_content">
                <span>__MSG__ARE_YOU_SURE_YOU_WANT_TO_REMOVE_THE_FOLLOWING_FILES__?</span><br />
                <div id="contentmedia_dialog_remove_list"></div>
                <input type="button" value="__MSG__YES__" id="contentmedia_dialog_remove_confirm" title="__MSG__YES__" />
                <input type="button" value="__MSG__NO__" id="contentmedia_dialog_remove_decline" title="__MSG__NO__" />
                <div id="contentmedia_dialog_remove_list_template"><!--
                    {for file in items}
                        <div class="contentmedia_dialog_remove_file">
                            {if file.name}
                                ${file.name}
                            {elseif file["sakai:filename"]}
                                ${file["sakai:filename"]}
                            {/if}
                        </div>
                    {/for}
                --></div>
            </div>
            <div class="dialog_footer">
                <div class="dialog_footer_inner"><!-- --></div>
            </div>
        </div>
        <script type="text/javascript" src="_javascript/contentmedia.js"></script>

    </body>

</html>